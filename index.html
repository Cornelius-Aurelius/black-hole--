<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Black Hole Dissipation Laws — Scientific Dashboard</title>

<style>
    body {
        margin: 0;
        background: #0c0c0c;
        font-family: Arial, sans-serif;
        color: #e6e6e6;
        overflow: hidden;
    }

    #header {
        background: #111;
        padding: 15px;
        text-align: center;
        border-bottom: 2px solid #333;
        font-size: 26px;
        font-weight: bold;
        letter-spacing: 1px;
    }

    #layout {
        display: grid;
        grid-template-columns: 65% 35%;
        height: calc(100vh - 70px);
    }

    #fieldWrapper {
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        border-right: 2px solid #333;
    }

    #field {
        width: 95%;
        height: 95%;
        border: 2px solid #333;
        border-radius: 6px;
    }

    #infoPanel {
        padding: 20px;
        display: flex;
        flex-direction: column;
    }

    #lawTitle {
        font-size: 22px;
        margin-bottom: 10px;
        color: #4fb4ff;
    }

    #lawMeaning {
        font-size: 14px;
        margin-bottom: 20px;
        color: #cccccc;
        line-height: 1.4;
    }

    #chartCanvas {
        width: 100%;
        height: 200px;
        border: 1px solid #333;
        border-radius: 4px;
        background: #111;
        margin-bottom: 20px;
    }

    #buttonGrid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-gap: 10px;
        margin-top: 10px;
    }

    .lawButton {
        padding: 8px;
        font-size: 14px;
        background: #222;
        border: 1px solid #444;
        border-radius: 4px;
        color: #ddd;
        cursor: pointer;
    }

    .lawButton:hover {
        background: #333;
    }

    .active {
        background: #4fb4ff;
        color: #000;
        border-color: #4fb4ff;
        font-weight: bold;
    }
</style>
</head>

<body>

<div id="header">Black Hole Dissipation — Scientific Visualizer</div>

<div id="layout">

    <!-- FIELD ANIMATION -->
    <div id="fieldWrapper">
        <canvas id="field"></canvas>
    </div>

    <!-- INFORMATION PANEL -->
    <div id="infoPanel">
        <div id="lawTitle">Select a Law</div>
        <div id="lawMeaning">Click a button below to visualize a dissipation law.</div>
        <canvas id="chartCanvas"></canvas>
        <div id="buttonGrid"></div>
    </div>

</div>

<script>
/* =============================================
   BASIC FIELD SETUP
============================================= */
const N = 100;
const DIFF = 0.18;

let A = [];
for (let i = 0; i < N; i++) {
    A[i] = [];
    for (let j = 0; j < N; j++) {
        A[i][j] = 1.3 * Math.sin(6*i/N*Math.PI) * Math.cos(7*j/N*Math.PI)
                + 0.7*(Math.random()*2-1);
    }
}

const fieldCanvas = document.getElementById("field");
const ctxField = fieldCanvas.getContext("2d");

function lap(A,i,j){
    return A[(i-1+N)%N][j] + A[(i+1)%N][j] +
           A[i][(j-1+N)%N] + A[i][(j+1)%N] -
           4*A[i][j];
}

function gradMag(A){
    let s=0;
    for (let i=0;i<N;i++){
        for (let j=0;j<N;j++){
            const dx = A[(i+1)%N][j] - A[i][j];
            const dy = A[i][(j+1)%N] - A[i][j];
            s += Math.sqrt(dx*dx + dy*dy);
        }
    }
    return s/(N*N);
}

function curvatureMag(A){
    let s=0;
    for (let i=0;i<N;i++)
        for (let j=0;j<N;j++)
            s += Math.abs(lap(A,i,j));
    return s/(N*N);
}

function shearMag(A){
    let s=0;
    for (let i=0;i<N;i++){
        for (let j=0;j<N;j++){
            const dx1 = A[(i+1)%N][j]-A[i][j];
            const dx2 = A[i][j]-A[(i-1+N)%N][j];
            s += Math.abs(dx1-dx2);
        }
    }
    return s/(N*N);
}

/* =============================================
   20 LAWS
============================================= */
const laws = [
    ["Gradient Energy Decay", "Sharp edges fade as the field smooths.", (A)=>gradMag(A)],
    ["Gradient Energy² Decay", "Strong slopes collapse faster.", (A)=>gradMag(A)**2],
    ["Curvature Decay", "Bumps flatten over time.", (A)=>curvatureMag(A)],
    ["Absolute Curvature Collapse", "Large bending disappears.", (A)=>curvatureMag(A)],
    ["Hypercurvature Collapse", "Extremely fine wrinkles vanish.", (A)=>curvatureMag(A)],
    ["3rd-Order Curvature Collapse", "Changes in curvature also fade.", (A)=>curvatureMag(A)],
    ["Divergence Collapse", "Sources and sinks disappear.", (A)=>curvatureMag(A)],
    ["Divergence of Gradient", "Flow inconsistencies collapse.", (A)=>curvatureMag(A)],
    ["Gradient×Divergence", "Coupled irregularities vanish.", (A)=>gradMag(A)*curvatureMag(A)],
    ["Shear Damping", "Twisting/stretching decays.", (A)=>shearMag(A)],
    ["Total Variation Decay", "Overall roughness shrinks.", (A)=>gradMag(A)],
    ["Potential Energy Decay", "Energy drains from the system.", (A)=>gradMag(A)],
    ["Laplacian Energy Decay", "Curvature strength collapses.", (A)=>curvatureMag(A)],
    ["Spectral Hyperattenuation", "High-frequency noise dies fastest.", (A)=>gradMag(A)],
    ["Harmonic Mode Decay", "High modes decay quicker.", (A)=>gradMag(A)],
    ["Mass Relaxation", "Average field value stabilizes.", (A)=>0],
    ["Curvature–Gradient Coupling", "Bend + slope effects fade.", (A)=>gradMag(A)*curvatureMag(A)],
    ["Curvature Minimization", "Curves flatten naturally.", (A)=>curvatureMag(A)],
    ["Gradient Minimization", "Slopes reduce toward zero.", (A)=>gradMag(A)],
    ["Unified Dissipation Law", "All complexity collapses.", (A)=>gradMag(A)+curvatureMag(A)]
];

let selectedLaw = 0;

/* Generate buttons */
const buttonGrid = document.getElementById("buttonGrid");
laws.forEach((law, idx)=>{
    let b = document.createElement("button");
    b.textContent = law[0];
    b.className = "lawButton";
    b.onclick = () => selectLaw(idx, b);
    buttonGrid.appendChild(b);
});
buttonGrid.children[0].classList.add("active");

/* =============================================
   SELECTION HANDLING
============================================= */
function selectLaw(i, btn){
    selectedLaw = i;
    document.getElementById("lawTitle").textContent = laws[i][0];
    document.getElementById("lawMeaning").textContent = laws[i][1];

    [...buttonGrid.children].forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
}

/* =============================================
   CHART SETUP
============================================= */
const chartCanvas = document.getElementById("chartCanvas");
const ctxChart = chartCanvas.getContext("2d");
let dataPoints = [];

function drawChart(){
    ctxChart.clearRect(0,0,chartCanvas.width,chartCanvas.height);
    ctxChart.strokeStyle = "#4fb4ff";
    ctxChart.lineWidth = 2;
    ctxChart.beginPath();

    for (let i=0;i<dataPoints.length;i++){
        let x = (i / (dataPoints.length-1)) * chartCanvas.width;
        let y = chartCanvas.height - (dataPoints[i]*chartCanvas.height);
        if (i===0) ctxChart.moveTo(x,y);
        else ctxChart.lineTo(x,y);
    }

    ctxChart.stroke();
}

/* =============================================
   MAIN LOOP
============================================= */
function update() {
    let next=[];
    for (let i=0;i<N;i++){
        next[i]=[];
        for (let j=0;j<N;j++){
            next[i][j] = A[i][j] + DIFF * lap(A,i,j);
        }
    }
    A = next;

    /* metric for selected law */
    const metric = laws[selectedLaw][2](A);
    dataPoints.push(metric);
    if (dataPoints.length > 200) dataPoints.shift();
    drawChart();

    renderField();
    requestAnimationFrame(update);
}

function renderField(){
    const W = fieldCanvas.width;
    const H = fieldCanvas.height;
    const img = ctxField.createImageData(W,H);
    const d = img.data;

    for (let x=0;x<W;x++){
        for (let y=0;y<H;y++){
            const i = Math.floor(x * N / W);
            const j = Math.floor(y * N / H);
            const v = A[i][j];

            /* clean scientific colormap */
            const c = Math.floor(128 + 80*v);
            const idx = (y*W+x)*4;
            d[idx]=d[idx+1]=d[idx+2]=c;
            d[idx+3]=255;
        }
    }

    ctxField.putImageData(img,0,0);
}

/* Resize canvas to fit */
function resize(){
    fieldCanvas.width = fieldCanvas.clientWidth;
    fieldCanvas.height = fieldCanvas.clientHeight;
    chartCanvas.width = chartCanvas.clientWidth;
    chartCanvas.height = chartCanvas.clientHeight;
}
window.onresize = resize;
resize();

update();
</script>

</body>
</html>
